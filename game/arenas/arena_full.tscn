[gd_scene load_steps=12 format=2]

[ext_resource path="res://arenas/arena_left.tscn" type="PackedScene" id=1]
[ext_resource path="res://arenas/arena_right.tscn" type="PackedScene" id=2]
[ext_resource path="res://arenas/middle_wall.tscn" type="PackedScene" id=3]
[ext_resource path="res://arenas/side_wall.tscn" type="PackedScene" id=4]
[ext_resource path="res://player/player.tscn" type="PackedScene" id=5]
[ext_resource path="res://scripts/arena_full.gd" type="Script" id=6]
[ext_resource path="res://player/right_player_input_definition.tres" type="Resource" id=7]
[ext_resource path="res://player/left_player_input_definition.tres" type="Resource" id=8]
[ext_resource path="res://scripts/match/match_state_machine.gd" type="Script" id=10]
[ext_resource path="res://scripts/match/match_fighting_state.gd" type="Script" id=11]
[ext_resource path="res://scripts/match/match_prep_state.gd" type="Script" id=13]

[node name="arena_full" type="Node2D"]
script = ExtResource( 6 )
card_timer_path = NodePath("match/prep_state/prep_timer")
weapon_attachment_timer_path = NodePath("")
player_scene = ExtResource( 5 )

[node name="match" type="Node" parent="."]
script = ExtResource( 10 )

[node name="prep_state" type="Node" parent="match"]
script = ExtResource( 13 )
label_path = NodePath("../../time_label")
timer_path = NodePath("prep_timer")

[node name="prep_timer" type="Timer" parent="match/prep_state"]
wait_time = 20.0
one_shot = true

[node name="fighting_state" type="Node" parent="match"]
script = ExtResource( 11 )
label_path = NodePath("../../time_label")
timer_path = NodePath("fighting_timer")

[node name="fighting_timer" type="Timer" parent="match/fighting_state"]
wait_time = 60.0
one_shot = true

[node name="Camera2D" type="Camera2D" parent="."]
offset = Vector2( 960, 540 )
current = true

[node name="arenas" type="Node2D" parent="."]

[node name="arena_left" parent="arenas" instance=ExtResource( 1 )]

[node name="arena_right" parent="arenas" instance=ExtResource( 2 )]

[node name="walls" type="Node2D" parent="."]

[node name="side_wall_left" parent="walls" instance=ExtResource( 4 )]
modulate = Color( 0.164706, 0.176471, 0.203922, 1 )

[node name="side_wall_up" parent="walls" instance=ExtResource( 4 )]
modulate = Color( 0.164706, 0.176471, 0.203922, 1 )
position = Vector2( 1970, 7.27596e-12 )
rotation = 1.5708
scale = Vector2( 1, 1.871 )

[node name="side_wall_down" parent="walls" instance=ExtResource( 4 )]
modulate = Color( 0.164706, 0.176471, 0.203922, 1 )
position = Vector2( 1970, 1130 )
rotation = 1.5708
scale = Vector2( 1, 1.871 )

[node name="side_wall_right" parent="walls" instance=ExtResource( 4 )]
modulate = Color( 0.164706, 0.176471, 0.203922, 1 )
position = Vector2( 1970, 0 )

[node name="middle_wall" parent="walls" instance=ExtResource( 3 )]

[node name="players_spawn_positions" type="Node2D" parent="."]

[node name="Position2D" type="Position2D" parent="players_spawn_positions"]
position = Vector2( 100, 100 )

[node name="Position2D2" type="Position2D" parent="players_spawn_positions"]
position = Vector2( 1820, 100 )

[node name="players" type="Node2D" parent="."]

[node name="player_left" parent="players" instance=ExtResource( 5 )]
_movement_input_definition = ExtResource( 8 )

[node name="player_right" parent="players" instance=ExtResource( 5 )]
_movement_input_definition = ExtResource( 7 )

[node name="time_label" type="Label" parent="."]
margin_left = 794.0
margin_top = 24.0
margin_right = 1670.0
margin_bottom = 486.0
rect_scale = Vector2( 8.99015, 12.0935 )
text = "00:30"

[connection signal="timeout" from="match/prep_state/prep_timer" to="match/prep_state" method="_on_prep_timer_timeout"]
[connection signal="timeout" from="match/fighting_state/fighting_timer" to="match/fighting_state" method="_on_fight_timer_timeout"]
